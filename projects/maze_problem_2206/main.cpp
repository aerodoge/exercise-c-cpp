#include "include/maze.hpp"
#include <iostream>
#include <array>

int main() {
    // 定义12x12的迷宫
    std::array<std::array<char, 12>, 12> mazeGrid = {{
        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'},
        {'#', '.', '.', '.', '#', '.', '.', '.', '.', '.', '.', '#'},
        {'#', '.', '#', '.', '#', '.', '#', '#', '#', '#', '.', '#'},
        {'#', '#', '#', '.', '#', '.', '.', '.', '.', '#', '.', '#'},
        {'#', '.', '.', '.', '.', '#', '#', '#', '.', '#', '.', '.'},
        {'#', '#', '#', '#', '.', '#', '.', '#', '.', '#', '.', '#'},
        {'#', '.', '.', '#', '.', '#', '.', '#', '.', '#', '.', '#'},
        {'#', '#', '.', '#', '.', '#', '.', '#', '.', '#', '.', '#'},
        {'#', '.', '.', '.', '.', '.', '.', '.', '.', '#', '.', '#'},
        {'#', '#', '#', '#', '#', '#', '.', '#', '#', '#', '.', '#'},
        {'#', '.', '.', '.', '.', '.', '.', '#', '.', '.', '.', '#'},
        {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
    }};

    Position start = {1, 1};    // 起点
    Position end = {4, 11};     // 终点（右边界的出口）

    Maze<12> maze(mazeGrid, start, end);

    std::cout << "=========================================\n";
    std::cout << "      迷宫遍历程序 (C++20)\n";
    std::cout << "=========================================\n";

    // 选择算法
    std::cout << "\n选择遍历算法:\n";
    std::cout << "1. 右手法则（靠右墙行走）\n";
    std::cout << "2. 深度优先搜索（DFS）\n";
    std::cout << "请输入选项 (1 或 2): ";

    int choice;
    std::cin >> choice;

    bool useRightHand = (choice == 1);
    maze.solve(useRightHand);

    std::cout << "\n图例:\n";
    std::cout << "  # - 墙壁\n";
    std::cout << "  . - 可行路径\n";
    std::cout << "  S - 起点\n";
    std::cout << "  E - 终点\n";
    std::cout << "  X - 探索的路径\n";
    std::cout << "  o - 回溯的路径\n";

    return 0;
}