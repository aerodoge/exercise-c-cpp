# Poker Game - C++20 Implementation

这是一个使用现代C++20实现的扑克牌游戏项目，包含完整的游戏逻辑、牌型判断和AI对手。

## 项目特性

### 技术特性
- **C++20标准**: 使用最新的C++20特性
- **面向对象设计**: 清晰的类层次结构和封装
- **高性能洗牌算法**: 采用Fisher-Yates算法，时间复杂度O(n)
- **智能AI玩家**: 庄家会根据牌型质量智能决策换牌策略
- **类型安全**: 使用enum class和强类型系统

### 游戏特性
- 完整的52张扑克牌系统
- 5张牌的德州扑克规则
- 支持的牌型：
  - 高牌 (High Card)
  - 一对 (One Pair)
  - 两对 (Two Pair)
  - 三条 (Three of a Kind)
  - 顺子 (Straight)
  - 同花 (Flush)
  - 葫芦 (Full House)
  - 四条 (Four of a Kind)
  - 同花顺 (Straight Flush)
- 完善的牌型比较系统（包括花色比较）
- 多轮游戏支持和统计功能

## 项目结构

```
.
├── include/              # 头文件目录
│   ├── Card.h           # 扑克牌类
│   ├── Deck.h           # 牌堆类
│   ├── Hand.h           # 手牌类
│   ├── HandEvaluator.h  # 牌型评估类
│   ├── HandComparator.h # 牌型比较类
│   ├── Player.h         # 玩家类
│   └── Game.h           # 游戏类
├── src/                  # 源文件目录
│   ├── main.cpp         # 主程序入口
│   ├── Card.cpp         # 扑克牌实现
│   ├── Deck.cpp         # 牌堆实现
│   ├── Hand.cpp         # 手牌实现
│   ├── HandEvaluator.cpp # 牌型评估实现
│   ├── HandComparator.cpp # 牌型比较实现
│   ├── Player.cpp       # 玩家实现
│   └── Game.cpp         # 游戏实现
├── build/                # 构建目录（自动生成）
├── CMakeLists.txt        # CMake构建配置
└── README.md             # 项目说明文档
```

## 类设计说明

### Card类
表示一张扑克牌，包含花色（Hearts, Diamonds, Clubs, Spades）和点数（Ace-King）。
使用C++20的三路比较运算符（spaceship operator）实现比较。

### Deck类
管理一副52张牌，实现了：
- Fisher-Yates高性能洗牌算法
- 发牌功能（单张或多张）
- 牌堆重置功能

### Hand类
管理玩家的5张手牌，支持：
- 添加/移除/替换牌
- 按点数排序
- 格式化显示

### HandEvaluator类
评估手牌的牌型，实现了所有标准扑克牌型的判断逻辑。

### HandComparator类
比较两手牌的大小，实现完整的比较规则：
1. 首先比较牌型等级
2. 相同牌型比较关键牌点数
3. 点数相同比较花色（红桃<方块<梅花<黑桃）

### Player类（抽象基类）
- **HumanPlayer**: 人类玩家，通过命令行交互选择换牌
- **AIPlayer**: AI玩家（庄家），根据牌型质量智能决策：
  - 好牌（三条及以上）：不换牌
  - 两对：不换牌
  - 一对：换掉非对子的牌
  - 接近同花：换一张不同花色的牌
  - 接近顺子：换掉不连续的牌
  - 高牌：换掉最小的3张牌

### Game类
控制游戏流程：
- 洗牌和发牌
- 换牌阶段
- 摊牌比较
- 多轮游戏和统计

## 编译和运行

### 前置要求
- C++20兼容的编译器（GCC 10+, Clang 10+, MSVC 2019+）
- CMake 3.20或更高版本

### 编译步骤

```bash
mkdir -p build
cd build
cmake ..
make
```

### 运行游戏

```bash
./build/pocker_2206
```

## 游戏规则

1. **发牌**: 每位玩家获得5张牌
2. **换牌**: 玩家可以选择换掉0-5张牌
   - 输入要换的牌的编号（1-5），用空格分隔
   - 直接按Enter保留所有牌
3. **摊牌**: 比较双方的牌型，决定胜负
4. **比较规则**:
   - 牌型等级：同花顺 > 四条 > 葫芦 > 同花 > 顺子 > 三条 > 两对 > 一对 > 高牌
   - 相同牌型比较关键牌点数
   - 点数相同比较花色（红桃 < 方块 < 梅花 < 黑桃）

## C++20特性使用

- `enum class`: 强类型枚举
- `[[nodiscard]]`: 标记不应忽略返回值的函数
- `noexcept`: 异常规格说明
- `auto`: 自动类型推导
- `<=>`: 三路比较运算符（spaceship operator）
- `std::optional`: 表示可能不存在的值
- `std::format`: 格式化字符串（Card类）
- `constexpr`: 编译期常量
- 范围for循环和结构化绑定

## 最佳实践

1. **RAII**: 资源管理使用智能指针（`std::unique_ptr`）
2. **const正确性**: 适当使用const和noexcept
3. **封装**: 良好的接口设计，隐藏实现细节
4. **单一职责**: 每个类都有明确的单一职责
5. **命名空间**: 使用Poker命名空间避免命名冲突
6. **类型安全**: 使用enum class代替整数常量
7. **错误处理**: 使用std::optional表示可能失败的操作

## 扩展建议

- 添加更多玩家支持
- 实现下注系统
- 添加不同的扑克游戏变体
- 实现图形界面
- 添加网络对战功能
- 改进AI策略（使用机器学习）

## 作者

根据"跟我一起学编程系列课程：第二篇 C语言 项目实战"中的扑克牌游戏项目实现。

## 许可证

本项目仅供学习和研究使用。
